(this["webpackJsonpreact-ml-app"]=this["webpackJsonpreact-ml-app"]||[]).push([[0],{11:function(e,a,n){"use strict";(function(e){n.d(a,"b",(function(){return h})),n.d(a,"c",(function(){return g})),n.d(a,"e",(function(){return f})),n.d(a,"d",(function(){return w})),n.d(a,"f",(function(){return b})),n.d(a,"a",(function(){return C}));var t=n(10),r=n.n(t),i=n(54),o=n.n(i),l=n(40),c=n(45),s=n.n(c),u=n(12),d=n.n(u),m=n(55),p=n.n(m),h=function(e){return e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")},g=function(e){var a=e.split("_").map((function(e){return e.charAt(0).toLowerCase()+e.slice(1).toLowerCase()})).join("_");return"".concat("/react-ml-app","/images/").concat(a,".jpg")},f=function(){return new l.InferenceSession({backendHint:"webgl"})};function _(e){var a,n,t,i;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:for(n=(a=[1,3,299,299]).reduce((function(e,a){return e*a})),t=new l.Tensor(new Float32Array(n),"float32",a),i=0;i<n;i++)t.data[i]=2*Math.random()-1;return o.next=6,r.a.awrap(e.run([t]));case 6:case"end":return o.stop()}}))}function w(e){return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(e.loadModel(p.a));case 2:return a.next=4,r.a.awrap(_(e));case 4:case"end":return a.stop()}}))}function b(e,a,n){setTimeout((function(){return function(e,a,n){var t,i,o,c,s;return r.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return t=a.width,i=a.height,o=k(a),c=new l.Tensor(o,"float32",[1,3,t,i]),u.next=5,r.a.awrap(e.run([c]));case 5:s=u.sent,n(s);case 7:case"end":return u.stop()}}))}(e,a,n)}),10)}var k=function(e){var a=e.data,n=e.width,t=e.height,r=s()(new Float32Array(a),[n,t,4]),i=s()(new Float32Array(n*t*3),[1,3,n,t]);return d.a.assign(i.pick(0,0,null,null),r.pick(null,null,0)),d.a.assign(i.pick(0,1,null,null),r.pick(null,null,1)),d.a.assign(i.pick(0,2,null,null),r.pick(null,null,2)),d.a.divseq(i,255),d.a.subseq(i.pick(0,0,null,null),.485),d.a.subseq(i.pick(0,1,null,null),.456),d.a.subseq(i.pick(0,2,null,null),.406),d.a.divseq(i.pick(0,0,null,null),.229),d.a.divseq(i.pick(0,1,null,null),.224),d.a.divseq(i.pick(0,2,null,null),.225),i.data},v=function(a){return new Promise((function(n,t){e.setTimeout((function(){return n()}),a)}))},E={maxWidth:299,maxHeight:299,cover:!0,crop:!0,canvas:!0,crossOrigin:"Anonymous",orientation:!0},y=function(e){return new Promise((function(a,n){o()(e,(function(e){return a(e)}),E)}))},C=function(e,a,n){var t,i,o;return r.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(a&&a.current){l.next=2;break}return l.abrupt("return");case 2:return l.next=4,r.a.awrap(y(e));case 4:if("error"!==(t=l.sent).type){l.next=7;break}throw new Error("could not load image");case 7:return(i=a.current.getContext("2d")).drawImage(t,0,0),l.next=11,r.a.awrap(v(1));case 11:o=i.getImageData(0,0,a.current.width,a.current.height),n(o);case 13:case"end":return l.stop()}}))}}).call(this,n(77))},55:function(e,a,n){e.exports=n.p+"static/media/dogs-resnet18.e15a2861.onnx"},68:function(e,a,n){e.exports=n(89)},89:function(e,a,n){"use strict";n.r(a);var t=n(0),r=n.n(t),i=n(13),o=n.n(i),l=n(10),c=n.n(l),s=n(15),u=["Afghan_hound","African_hunting_dog","Airedale","American_Staffordshire_terrier","Appenzeller","Australian_terrier","Bedlington_terrier","Bernese_mountain_dog","Blenheim_spaniel","Border_collie","Border_terrier","Boston_bull","Bouvier_des_Flandres","Brabancon_griffon","Brittany_spaniel","Cardigan","Chesapeake_Bay_retriever","Chihuahua","Dandie_Dinmont","Doberman","English_foxhound","English_setter","English_springer","EntleBucher","Eskimo_dog","French_bulldog","German_shepherd","German_short-haired_pointer","Gordon_setter","Great_Dane","Great_Pyrenees","Greater_Swiss_Mountain_dog","Ibizan_hound","Irish_setter","Irish_terrier","Irish_water_spaniel","Irish_wolfhound","Italian_greyhound","Japanese_spaniel","Kerry_blue_terrier","Labrador_retriever","Lakeland_terrier","Leonberger","Lhasa","Maltese_dog","Mexican_hairless","Newfoundland","Norfolk_terrier","Norwegian_elkhound","Norwich_terrier","Old_English_sheepdog","Pekinese","Pembroke","Pomeranian","Rhodesian_ridgeback","Rottweiler","Saint_Bernard","Saluki","Samoyed","Scotch_terrier","Scottish_deerhound","Sealyham_terrier","Shetland_sheepdog","Shih-Tzu","Siberian_husky","Staffordshire_bullterrier","Sussex_spaniel","Tibetan_mastiff","Tibetan_terrier","Walker_hound","Weimaraner","Welsh_springer_spaniel","West_Highland_white_terrier","Yorkshire_terrier","affenpinscher","basenji","basset","beagle","black-and-tan_coonhound","bloodhound","bluetick","borzoi","boxer","briard","bull_mastiff","cairn","chow","clumber","cocker_spaniel","collie","curly-coated_retriever","dhole","dingo","flat-coated_retriever","giant_schnauzer","golden_retriever","groenendael","keeshond","kelpie","komondor","kuvasz","malamute","malinois","miniature_pinscher","miniature_poodle","miniature_schnauzer","otterhound","papillon","pug","redbone","schipperke","silky_terrier","soft-coated_wheaten_terrier","standard_poodle","standard_schnauzer","toy_poodle","toy_terrier","vizsla","whippet","wire-haired_fox_terrier"],d=n(148),m=n(127),p=n(30),h=n(128),g=n(151),f=n(129),_=n(130),w=n(131),b=n(125),k=Object(b.a)({card:{width:299,height:299},item:{paddingTop:10}});function v(e){var a=e.items,n=k();return r.a.createElement(m.a,{className:n.card},r.a.createElement(h.a,{dense:!0},a.map((function(e){var a=e.avatar,t=e.name,i=e.percentage,o="".concat(t,"-").concat(i);return r.a.createElement(g.a,{key:o,className:n.item},r.a.createElement(f.a,null,r.a.createElement(d.a,{alt:"image of ".concat(t),src:a})),r.a.createElement(_.a,{id:o,primary:t}),r.a.createElement(w.a,null,r.a.createElement(p.a,null,i,"%")))}))))}var E=n(11);function y(e){var a=e.output;if(!a)return null;var n=function(e,a){var n=Array.from(e).map((function(e,a){return[e,a]})).sort((function(e,a){return e[0]<a[0]?-1:e[0]>a[0]?1:0})).reverse().slice(0,a),t=e.map((function(e){return Math.exp(e)})).reduce((function(e,a){return e+a}));return n.map((function(e,a,n){var r=Object(s.a)(e,2),i=r[0],o=r[1];return{breed:u[o],act:i,prob:Math.exp(i)/t}}))}(a,5).map((function(e){var a=e.breed,n=e.prob;return{name:Object(E.b)(a),percentage:(100*n).toFixed(2),avatar:Object(E.c)(a)}}));return r.a.createElement(v,{items:n})}var C=n(134),j=n(3),S=n(56),x=n.n(S),B=n(133),A=n(146),N=n(132),O=Object(b.a)((function(e){return{box:{width:299,padding:0,margin:0},content:{boxSizing:"border-box"},info:{backgroundColor:e.palette.primary.main},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));function F(e){var a=e.message,n=O();return r.a.createElement(A.a,{className:n.box},r.a.createElement(N.a,{className:Object(j.a)(n.info,n.content),message:r.a.createElement("span",{className:n.message},r.a.createElement(x.a,{className:Object(j.a)(n.icon,n.iconVariant)}),a)}))}function T(e){var a=e.message,n=O();return r.a.createElement(A.a,{className:n.box},r.a.createElement(N.a,{className:n.content,message:r.a.createElement("span",{className:n.message},r.a.createElement(B.a,{size:20,className:n.iconVariant}),a)}))}var I=n(58),W=n.n(I),D=n(57),P=n.n(D),Y=Object(b.a)({icon:{width:"50%",height:"50%",color:"grey"}}),L=function(e){var a=e.fileLoaded,n=e.isDragActive,t=Y();return a?null:n?r.a.createElement(P.a,{className:t.icon}):r.a.createElement(W.a,{className:t.icon})},G=n(60),M=Object(b.a)({card:{width:299,height:299,position:"relative",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:10},canvas:{width:299,height:299,zIndex:0,position:"absolute"},input:{zIndex:9999,position:"absolute"}});function R(e){var a=e.setFile,n=e.canvasRef,i=e.fileLoaded,o=M(),l=Object(t.useCallback)((function(e){if(e.length>1)return console.log("can only handle one file at a time");if(0!==e.length){var n=e[0];if(!n.type.startsWith("image"))return console.log("file must be an image");a(n)}}),[a]),c=Object(G.a)({onDrop:l}),s=c.getRootProps,u=c.getInputProps,d=c.isDragActive;return r.a.createElement(m.a,Object.assign({},s(),{className:o.card}),r.a.createElement("canvas",{className:o.canvas,ref:n,width:299,height:299}),r.a.createElement("input",Object.assign({alt:"Image Dropzone",type:"image",className:o.input},u())),r.a.createElement(L,{fileLoaded:i,isDragActive:d}))}var z=n(135),H=Object(E.e)(),q=Object(b.a)((function(e){return{root:{flexGrow:1}}}));function J(){var e=Object(t.useState)(!1),a=Object(s.a)(e,2),n=a[0],i=a[1],o=Object(t.useState)(!1),l=Object(s.a)(o,2),u=l[0],d=l[1],m=Object(t.useState)(null),p=Object(s.a)(m,2),h=p[0],g=p[1],f=Object(t.useRef)(null),_=Object(t.useState)(null),w=Object(s.a)(_,2),b=w[0],k=w[1];Object(t.useEffect)((function(){h&&Object(E.a)(h,f,k)}),[h]);var v=Object(t.useState)(null),j=Object(s.a)(v,2),S=j[0],x=j[1];Object(t.useEffect)((function(){n&&b&&Object(E.f)(H,b,x)}),[n,b]);var B=S&&S.values().next().value.data,A=q();return r.a.createElement("div",{className:A.root},r.a.createElement(C.a,{container:!0,spacing:3},r.a.createElement(C.a,{item:!0},r.a.createElement(R,{setFile:g,canvasRef:f,fileLoaded:!!h}),!n&&!u&&r.a.createElement(z.a,{variant:"contained",onClick:function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u&&!n){e.next=2;break}return e.abrupt("return");case 2:return d(!0),e.next=5,c.a.awrap(Object(E.d)(H));case 5:i(!0),d(!1);case 7:case"end":return e.stop()}}))}},"Load model (48 MB)"),!n&&u&&r.a.createElement(T,{message:"Loading model..."}),n&&b&&!S&&r.a.createElement(T,{message:"Running model..."}),n&&!h&&r.a.createElement(F,{message:"Add or take a picture..."}),!!h&&!b&&r.a.createElement(T,{message:"Loading image..."})),r.a.createElement(C.a,{item:!0},r.a.createElement(y,{output:B}))))}var U=n(138),K=n(140),V=n(136),$=n(137),Q=n(147),X=n(149),Z=n(139),ee=n(25),ae=n.n(ee),ne=n(141),te=n(145),re=n(144),ie=n(142),oe=n(143),le="Bouvier_des_Flandres,https://commons.wikimedia.org/wiki/File:Ygor_Raiza.jpg,Eva Nordlund,CC BY-SA 2.5\nBrabancon_griffon,https://en.wikipedia.org/wiki/Griffon_Bruxellois#/media/File:0709_gucci_stolt.jpg,Maria Micha\xeblsson,CC BY-SA 3.0\nCardigan,https://en.wikipedia.org/wiki/Cardigan_Welsh_Corgi#/media/File:Wystawa_Rybnik_02.10.2011_welsh_corgi_cardigan_g%C5%82owa_pl.jpg,Pleple2000,CC BY-SA 3.0\nDandie_Dinmont,https://commons.wikimedia.org/wiki/File:A_Dandie_Dinmont.jpg,audrey_sel,CC BY-SA 2.0\nEnglish_foxhound,https://commons.wikimedia.org/wiki/English_Foxhound#/media/File:English_Foxhound_portrait.jpg,Thowra_uk,CC BY 2.0\nIrish_water_spaniel,https://commons.wikimedia.org/wiki/File:Irish_Water_Spaniel_4.jpg,Canarian,CC BY-SA 4.0 International\nJapanese_spaniel,https://commons.wikimedia.org/wiki/File:Japanese_ChinJapanese_Spaniel.jpg,T.shinzaemon,CC BY-SA 4.0 International\nKerry_blue_terrier,https://commons.wikimedia.org/wiki/Kerry_Blue_Terrier#/media/File:Kerry_Blue_Terrier_puppy.png,Vbi20,CC BY-SA 3.0\nMexican_Hairless,https://commons.wikimedia.org/wiki/File:Mexican_Hairless.jpg,Dagon Hoyohoy,CC-BY 2.0 Generic\nNorwich_terrier,https://commons.wikimedia.org/wiki/Norwich_Terrier#/media/File:Norwich_Terrier1.JPG,Helene Gisin Hgisin,CC BY-SA 4.0\nOld_English_sheepdog,https://commons.wikimedia.org/wiki/Old_English_Sheepdog#/media/File:Old_English_Sheep_Dog.JPG,Squigman,Public Domain\nscotch_terrier,https://en.wikipedia.org/wiki/Scottish_Terrier#/media/File:Scottish_Terrier_Photo_of_Face.jpg,Elise Carroll,CC BY-SA 4.0\nScottish_deerhound,https://en.wikipedia.org/wiki/Scottish_Deerhound#/media/File:Modhish_Archie_MacTavish-foto_hanna_Wo%C5%BAna-Gil.jpg,Hanna Wo\u017ana - Gil,CC BY-SA 3.0\nSealyham_terrier,https://en.wikipedia.org/wiki/Sealyham_Terrier#/media/File:Adult_Sealyham_Terrier.jpg,Chuck in MA,CC BY-SA 4.0\nSussex_spaniel,https://de.wikipedia.org/wiki/Datei:Sussex_spaniel_t43.jpg,Pleple2000,CC BY 3.0\nWalker_hound,https://en.wikipedia.org/wiki/Treeing_Walker_Coonhound#/media/File:Treeing-walker-coonhound-standing.jpg,Kingkong954,Public Domain\nblack-and-tan_coonhound,https://en.wikipedia.org/wiki/Black_and_Tan_Coonhound#/media/File:BTCoonhnd.jpg,Scraig,CC BY-SA 3.0\nclumber,https://en.wikipedia.org/wiki/Clumber_Spaniel#/media/File:Clumber_spaniel_rybnik_kamien_pppl.jpg,Pleple2000,CC BY-SA 4.0\ncollie,https://commons.wikimedia.org/wiki/File:Rough_Collie_600.jpg,sannse,CC BY-SA 3.0 Unported\notterhound,https://en.wikipedia.org/wiki/Otterhound#/media/File:Two_otterhounds.jpg,Machinecha~commonswiki,Public Domain\nredbone,https://commons.wikimedia.org/wiki/File:Memphis_the_Redbone_Coonhound_(7_Nov_2004).jpg,Arlawson,CC BY-SA 3.0 Unported\nschipperke,https://commons.wikimedia.org/wiki/Schipperke#/media/File:G%C5%82owa_gismo_-_schipperke.jpg,Lilly M,CC BY-SA 3.0\nwire-haired_fox_terrier,https://en.wikipedia.org/wiki/Wire_Fox_Terrier#/media/File:Wera.JPG,Duspivova,CC BY-SA 3.0".split("\n").map((function(e){var a=e.split(","),n=Object(s.a)(a,4),t=n[0],r=n[1],i=n[2],o=n[3];return{img:Object(E.c)(t),breed:t,source:r,author:i,license:o}})),ce=Object(b.a)((function(e){return{root:{flexGrow:1},content:{marginTop:20},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},table:{width:"100%"},footer:{padding:e.spacing(2),marginTop:"auto"},button:{margin:e.spacing(1)}}}));var se=function(){var e=ce();return r.a.createElement("div",{className:e.root},r.a.createElement(V.a,{position:"static"},r.a.createElement($.a,null,r.a.createElement(p.a,{variant:"h6",className:e.title},"Dog Breed Classifier"))),r.a.createElement(U.a,{className:e.content},r.a.createElement(J,null)),r.a.createElement(U.a,{className:e.content},r.a.createElement(Q.a,null,r.a.createElement(X.a,{expandIcon:r.a.createElement(ae.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(p.a,{className:e.heading},"How do I use this?")),r.a.createElement(Z.a,null,r.a.createElement(p.a,{variant:"body2"},"Tab on the image icon to take a photo of a dog and drag and drop an image file of a dog on the image icon to classify the dog's breed. Note that only ",u.length," different dog breeds are supported. If your image shows a different dog bread, the prediction will be pretty meaningless."))),r.a.createElement(Q.a,null,r.a.createElement(X.a,{expandIcon:r.a.createElement(ae.a,null),"aria-controls":"panel2a-content",id:"panel2a-header"},r.a.createElement(p.a,{className:e.heading},"What dog breeds does the classifier know?")),r.a.createElement(Z.a,null,r.a.createElement(p.a,{variant:"body2"},"This classifier is based on the ",r.a.createElement(K.a,{to:"http://vision.stanford.edu/aditya86/ImageNetDogs/"},"Stanford Dogs Dataset"),", which contains ",u.length," different breeds. Here is a list of all of them: ",u.map((function(e){return Object(E.b)(e)})).join(", "),"."))),r.a.createElement(Q.a,null,r.a.createElement(X.a,{expandIcon:r.a.createElement(ae.a,null),"aria-controls":"panel3a-content",id:"panel3a-header"},r.a.createElement(p.a,{className:e.heading},"What is this good for?")),r.a.createElement(Z.a,null,r.a.createElement(p.a,{variant:"body2"},"This app is not made to actually classify dog breeds. It does not cover enough breeds and important breeds are missing altogether. Rather, it is an end-to-end example that shows how to train machine learning models and run them in the browser. If you want to learn more, check out the ",r.a.createElement(K.a,{to:"https://github.com/davidpfahler/react-ml-app"},"GitHub repository"),"."))),r.a.createElement(Q.a,null,r.a.createElement(X.a,{expandIcon:r.a.createElement(ae.a,null),"aria-controls":"panel3a-content",id:"panel3a-header"},r.a.createElement(p.a,{className:e.heading},"What happens to my data?")),r.a.createElement(Z.a,null,r.a.createElement(p.a,{variant:"body2"},"No image that you take with or add to this application will be uploaded or stored on my or anyone's servers by this application / website. In fact, your images never leave your device, because all the calculations are done in you browser! Only some general networking data is processed to make this website work (like all websites). Please see my ",r.a.createElement(K.a,{to:"https://davidpfahler.com/privacy-policy/"},"privacy policy")," for further details."))),r.a.createElement(Q.a,null,r.a.createElement(X.a,{expandIcon:r.a.createElement(ae.a,null),"aria-controls":"panel3a-content",id:"panel3a-header"},r.a.createElement(p.a,{className:e.heading},"Image credits")),r.a.createElement(Z.a,null,r.a.createElement(U.a,null,r.a.createElement(p.a,{variant:"body2"},"Most images to illustrate the different dog breeds are sourced from pixabay.com, which are free for commercial use and do not require attribution. Some images are sourced from Wikipedia or Wikimedia and are licensed under a variant of the Creative Commons License. The below table contains the required attribution:"),r.a.createElement(ne.a,{className:e.table},r.a.createElement(ie.a,null,r.a.createElement(oe.a,null,r.a.createElement(re.a,null),r.a.createElement(re.a,null,"Breed"),r.a.createElement(re.a,null,"Source Link"),r.a.createElement(re.a,null,"Author"),r.a.createElement(re.a,null,"License"))),r.a.createElement(te.a,null,le.map((function(e){return r.a.createElement(oe.a,{key:e.breed},r.a.createElement(re.a,null,r.a.createElement(d.a,{alt:"image of ".concat(e.breed),src:e.img})),r.a.createElement(re.a,{component:"th",scope:"row"},e.breed),r.a.createElement(re.a,null,r.a.createElement(K.a,{to:e.source},"Link to source")),r.a.createElement(re.a,null,e.author),r.a.createElement(re.a,null,e.license))}))))))),r.a.createElement("footer",{className:e.footer},r.a.createElement(z.a,{className:e.button,href:"https://davidpfahler.com/privacy-policy/"},"Privacy Policy"),r.a.createElement(z.a,{className:e.button,href:"https://davidpfahler.com/impressum/"},"Impressum"))))},ue=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function de(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(se,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/react-ml-app",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("/react-ml-app","/service-worker.js");ue?(!function(e,a){fetch(e).then((function(n){var t=n.headers.get("content-type");404===n.status||null!=t&&-1===t.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):de(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):de(a,e)}))}}()}},[[68,1,2]]]);
//# sourceMappingURL=main.544a0a34.chunk.js.map